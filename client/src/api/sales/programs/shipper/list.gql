query SHIPPER_PROGRAM_LIST(
  $arrivalPort: String!
  $endDate: Date!
  $startDate: Date!
  $shipperId: String
) {
  shipperPrograms(
    condition: { arrivalPort: $arrivalPort, shipperId: $shipperId }
    filter: {
      shipperProgramEntries: {
        some: {
          programDate: {
            greaterThanOrEqualTo: $startDate
            lessThanOrEqualTo: $endDate
          }
        }
      }
    }
  ) {
    nodes {
      arrivalPort
      commonPackType {
        id
        packTypeName
      }
      commonPackTypeId
      commonSize {
        id
        sizeName
      }
      commonSizeId
      commonSpecies {
        id
        speciesName
        uiColor
      }
      commonSpeciesId
      commonVariety {
        id
        uiColor
        varietyName
      }
      commonVarietyId
      id
      notes
      plu
      customerId
      customer {
        id
        customerName
      }
      shipperId
      shipper {
        id
        shipperName
      }
      shipperProgramEntries {
        nodes {
          id
          notes
          palletCount
          programDate
          searchText
          shipperProgram {
            id
            notes
            plu
            arrivalPort
            commonSpecies {
              id
              speciesName
            }
            commonVariety {
              id
              varietyName
            }
            commonSize {
              id
              sizeName
            }
            commonPackType {
              id
              packTypeName
            }
            shipper {
              id
              shipperName
            }
            customer {
              id
              customerName
            }
          }
          shipperProgramEntryCustomerProgramEntries {
            nodes {
              customerProgramEntryId
              id
              palletCount
              shipperProgramEntryId
              customerProgramEntry {
                id
                customerProgram {
                  id
                  customer {
                    id
                    customerName
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
